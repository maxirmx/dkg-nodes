# Dkg nodes
[![Test](https://github.com/maxirmx/dkg-nodes/actions/workflows/test.yml/badge.svg)](https://github.com/maxirmx/dkg-nodes/actions/workflows/test.yml)

## Background
This project continues [Implementation of a distributed key generation algorithm (Pedersen 91) in C#](https://github.com/maxirmx/dkg). 
Pedersen 91 algorithm is synchronous by its nature. In ```dkg-nodes``` project we provide a wrapper for Pedersen 91 that help to run it in truly asynchronous distributed environment.
Implementation includes two types of entities
* ```dkg node``` that is a participant of distributed key generation algorithm. ```dkg node``` is REST API client and thus does not require any of its resources to be published
           
* ```dkg service node``` which orchestrates ```dkg nodes```. ```dkg service node``` is REST API server

Этот проект продолжает [Реализацию алгоритма распределенной генерации ключей (Pedersen 91) на C#](https://github.com/maxirmx/dkg). 
Алгоритм Pedersen 91 синхронен по своей природе. В проекте ```dkg-nodes``` мы реализуем оболочку для Pedersen 91, которая обеспечивает его запуск в по настоящему асинхронной распределенной среде.
Реализация включает в себя два типа узлов.
* ```dkg node```, который является участником алгоритма распределенной генерации ключей. ```dkg node``` является клиентом REST API и поэтому не требует публикации каких-либо ресурсов.
           
* ```dkg service node```, который управляет ```dkg nodes```. ```dkg service node``` — это сервер REST API. 

## Starting dkg node in docker container

__Parameters__
* ```<Name>``` -- ```dkg node``` name, optional, defaults to ```<GUID>```
* ```<GUID>``` -- ```dkg node``` GUID, optional. If GUID is not provided, it is autmatically generated upon node start.
  Note, that with autogenerated GUID the node is considered "different" for each run, while explicitly provided GUID ensures that the node is considered "the same"
* ```<Service node URL>``` -- fully qualified service node URL

* ```<Name>``` -- имя ```dkg node```, опционально, по умолчанию ```<GUID>```
* ```<GUID>``` -- GUID ```dkg node```, опционально. Если GUID не указан, он генерируется автоматически при запуске ```dkg node```.
  Обратите внимание, что при автоматически сгенерированном GUID ```dkg node``` считаются «разными» для каждого запуска, а явно указанный GUID гарантирует, что ```dkg node``` «одним и тем же».
* ```<URL-адрес узла службы>``` -- полный URL-адрес ```dkg service node```.
    
__Command__
```
docker run --env=DKG_SERVICE_NODE_URL=<Service node URL> --env=DKG_NODE_NAME=<Name> \
           --env=DKG_NODE_GUID=<GUID> \
           --env=PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin \
           --env=DOTNET_RUNNING_IN_CONTAINER=true --env=DOTNET_VERSION=8.0.4 --env=ASPNET_VERSION=8.0.4 \
           --workdir=/app --runtime=runc -d ghcr.io/maxirmx/dkg-node:0.4.3
```
__Example__

```
docker run --env=DKG_SERVICE_NODE_URL=http://dkg.samsonov.net:8080 --env=DKG_NODE_NAME=TheNodeAtKreel0 \
           --env=DKG_NODE_GUID=ADC13255-AEDB-49F8-869E-153D8A2F0FAE \
           --env=PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin \
           --env=DOTNET_RUNNING_IN_CONTAINER=true --env=DOTNET_VERSION=8.0.4 --env=ASPNET_VERSION=8.0.4 \
           --workdir=/app --runtime=runc -d ghcr.io/maxirmx/dkg-node:0.4.3
```

## Project financing
Initial development of this project was financed by [NarayanaSupramati](https://www.github.com/NarayanaSupramati)
